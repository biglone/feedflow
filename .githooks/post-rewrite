#!/usr/bin/env bash
set -euo pipefail

if [[ "${FEEDFLOW_DISABLE_LOCAL_SIGNING_HOOKS:-}" == "1" ]]; then
  exit 0
fi

if [[ "$(uname -s 2>/dev/null)" != "Darwin" ]]; then
  exit 0
fi

repo_root="$(git rev-parse --show-toplevel 2>/dev/null || pwd)"
setup_script="$repo_root/scripts/setup-ios-local-signing.sh"

if [[ ! -f "$setup_script" ]]; then
  exit 0
fi

"$setup_script" --non-interactive || true
